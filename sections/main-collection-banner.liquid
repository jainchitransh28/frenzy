<link data-href="{{ 'component-collection-hero.css' | asset_url }}" rel="stylesheet" type="text/css" media="all" />

{%- liquid
    assign padding_top = section.settings.mg_top_desktop | append: 'px'
    assign padding_bottom = section.settings.mg_bottom_desktop | append: 'px'
    assign padding_top_tablet = section.settings.mg_top_tablet | append: 'px'
    assign padding_bottom_tablet = section.settings.mg_bottom_tablet | append: 'px'
    assign padding_top_mobile = section.settings.mg_top_mobile | append: 'px'
    assign padding_bottom_mobile = section.settings.mg_bottom_mobile | append: 'px'
    assign container = section.settings.container
    assign show_breadcrumb = section.settings.show_breadcrumb
    assign breadcrumb_alignment = section.settings.breadcrumb_alignment
    assign breadcrumb_color = section.settings.breadcrumb_color 
    assign breadcrumb_color_mb = section.settings.breadcrumb_color_mb
    assign breadcrumb_bg = section.settings.breadcrumb_bg 
    assign breadcrumb_gradient = section.settings.breadcrumb_gradient 
    assign breadcrumb_bg_mb = section.settings.breadcrumb_bg_mb 
    assign breadcrumb_gradient_mb = section.settings.breadcrumb_gradient_mb 
    assign show_page_title = section.settings.show_page_title
    assign page_title_alignment = section.settings.page_title_alignment
    
    assign layout = section.settings.layout
    if section.blocks.size > 0
        assign image_block = section.blocks | where: "type", "image"
        assign description_block = section.blocks | where: "type", "description"
        for block in image_block
            assign image_block_type = block.settings.type
            assign show_bg_overlay = block.settings.show_bg_overlay
            assign bg_overlay = block.settings.bg_overlay
            if collection.image
                assign image = collection.image
            else
                assign image = block.settings.image
            endif
            
            assign image_mobile = block.settings.image_mobile

            assign show_image_parallax = block.settings.show_image_parallax
        endfor
        for block in description_block
            assign show_collection_description = block.settings.show_collection_description
            assign show_read_more_read_less = block.settings.show_read_more_read_less
            assign collection_description_position = block.settings.collection_description_position
            assign sub_collection_description_position = block.settings.sub_collection_description_position
            assign all_sub_collection_padding_top = block.settings.all_sub_collection_padding_top | append: 'px'
            assign all_sub_collection_padding_bottom = block.settings.all_sub_collection_padding_bottom | append: 'px'
            assign sub_collection_title = block.settings.sub_collection_title
            assign sub_collection_title_color = block.settings.sub_collection_title_color
            assign fontsize_sub_collection = block.settings.fontsize_sub_collection | append: 'px'
            assign fontweight_sub_collection = block.settings.fontweight_sub_collection
            assign sub_collection_text_transform = block.settings.sub_collection_text_transform
            assign sub_collection_padding_top = block.settings.sub_collection_padding_top | append: 'px'
            assign sub_collection_padding_bottom = block.settings.sub_collection_padding_bottom | append: 'px'
            assign sub_collection_grid_gap = block.settings.sub_collection_grid_gap | append: 'px'
            assign color_sub_collection = block.settings.color_sub_collection
            assign sub_collection_background = block.settings.sub_collection_background
            assign sub_collection_background_gradient = block.settings.sub_collection_background_gradient
            assign sub_collection_border = block.settings.sub_collection_border
            assign sub_collection_color_hover = block.settings.sub_collection_color_hover
            assign sub_collection_background_hover = block.settings.sub_collection_background_hover
            assign sub_collection_background_gradient_hover = block.settings.sub_collection_background_gradient_hover
            assign sub_collection_border_hover = block.settings.sub_collection_border_hover
            assign collection_description_align_tb = block.settings.collection_description_align_tb
            assign collection_description_align = block.settings.collection_description_align
            assign maxwidth_collection_description = block.settings.maxwidth_collection_description
            assign maxheight_sub_collection = block.settings.maxheight_sub_collection
            assign show_sub_collection = block.settings.show_sub_collection
            assign sub_collection_type = block.settings.sub_collection_type
            assign colors_bg = block.settings.colors_bg
            assign colors_bg_gradient = block.settings.colors_bg_gradient
            assign sub_collection_mg_top = block.settings.sub_collection_mg_top | append: 'px'
            assign show_sub_collection_image = block.settings.show_sub_collection_image
            assign sub_collection_layout = block.settings.sub_collection_layout
        endfor
    endif
-%}

<div data-section-id="{{ section.id }}" data-section-type="header-collection" id="HeaderCollectionSection-{{ section.id }}" data-section="{{ section.id }}">

  {% render 'collection-banner'%}
  
 
        
        <div class="collection-content collection-content-{{ layout }}">
            {%- for block in section.blocks -%}
                {%- if block.type == 'image' -%}
                    {%- if image_block_type == 'custom' -%}
                        {% render 'collection-banner',
                            collection: collection,
                            show_image_parallax: show_image_parallax,
                            show_bg_overlay: show_bg_overlay,
                            image: image,
                            image_mobile: image_mobile
                        %}
                    {%- endif -%}
                {%- elsif block.type == 'description' -%}
                    {%- if collection_description_position == 'relative' -%}
                        {% render 'collection-description',
                            collection: collection,
                            position: collection_description_position,
                            show_read_more_read_less: show_read_more_read_less,
                            collection_description_align: collection_description_align,
                            show_sub_collection: show_sub_collection,
                            sub_collection_position: sub_collection_description_position,
                            sub_collection_type: sub_collection_type,
                            colors_bg: colors_bg,
                            colors_bg_gradient: colors_bg_gradient,
                            all_sub_collection_padding_top: all_sub_collection_padding_top,
                            all_sub_collection_padding_bottom: all_sub_collection_padding_bottom,
                            sub_collection_title: sub_collection_title,
                            sub_collection_title_color: sub_collection_title_color,
                            fontsize_sub_collection: fontsize_sub_collection,
                            fontweight_sub_collection: fontweight_sub_collection,
                            sub_collection_text_transform: sub_collection_text_transform,
                            sub_collection_padding_top: sub_collection_padding_top,
                            sub_collection_padding_bottom: sub_collection_padding_bottom,
                            sub_collection_grid_gap: sub_collection_grid_gap,
                            color_sub_collection: color_sub_collection,
                            sub_collection_background: sub_collection_background,
                            sub_collection_background_gradient: sub_collection_background_gradient,
                            sub_collection_border: sub_collection_border,
                            sub_collection_color_hover: sub_collection_color_hover,
                            sub_collection_background_hover: sub_collection_background_hover,
                            sub_collection_background_gradient_hover: sub_collection_background_gradient_hover,
                            sub_collection_border_hover: sub_collection_border_hover,
                            show_collection_title: show_collection_title,
                            page_title_alignment: page_title_alignment,
                            show_collection_description: show_collection_description,
                            sub_collection_mg_top: sub_collection_mg_top,
                            show_sub_collection_image: show_sub_collection_image,
                            sub_collection_layout: sub_collection_layout,
                            maxheight_sub_collection: maxheight_sub_collection,
                            show_page_title: show_page_title
                        %}
                    {%- endif -%}
                {%- endif -%}
            {%- endfor -%}
        </div>

</div>

<style type="text/css" media="screen">
    #HeaderCollectionSection-{{ section.id }}{
        padding-top: {{ padding_top }};
        padding-bottom: {{ padding_bottom }};
    }
    
    {% if show_bg_overlay %}
        {% if bg_overlay != 'rgba(0,0,0,0)' and bg_overlay != blank %}
            #HeaderCollectionSection-{{ section.id }} .collection-banner--overlay .image:before{
                background-color: {{ bg_overlay | color_modify: 'alpha', 0.3 }};
            }
        {% endif %}
    {% endif %}

    #HeaderCollectionSection-{{ section.id }} .collection-description{
        max-width: {{ maxwidth_collection_description | append: 'px' }};
        {% if collection_description_align == 'right' %}
          float: right;
        {% endif %}  
    }

    @media (max-width: 1024px) {
        #HeaderCollectionSection-{{ section.id }}{
            padding-top: {{ padding_top_tablet }};
            padding-bottom: {{ padding_bottom_tablet }};
        }

        #HeaderCollectionSection-{{ section.id }} > .collection-header{
            padding-left: 15px;
            padding-right: 15px;
        }
    }

    @media (max-width: 550px) {
        #HeaderCollectionSection-{{ section.id }}{
            padding-top: {{ padding_top_mobile }};
            padding-bottom: {{ padding_bottom_mobile }};
        }
    }
</style>

{%- if description_block.size > 0 -%}
    {%- if show_read_more_read_less -%}
        <script type="text/javascript">
            window.read_description = {
                more: `{{ 'sections.collection_template.read_more' | t }}`,
                less: `{{ 'sections.collection_template.read_less' | t }}`
            };

            function readDescriptionToggle() {
                if (document.querySelector('.read-description')){
                    document.querySelector('.read-description').addEventListener('click', (event) => {
                        event.preventDefault();
                        event.stopPropagation();

                        var toggleButton = event.currentTarget,
                            toggleButtonText = event.currentTarget.querySelector('.text'),
                            content = event.target.closest('.collection-description');

                        if(toggleButton.classList.contains('less')){
                            toggleButton.classList.remove('less');
                            toggleButton.classList.add('more');
                            toggleButtonText.innerText = window.read_description.more;
                            content.classList.remove('show-full');
                        } else {
                            toggleButton.classList.remove('more');
                            toggleButton.classList.add('less');
                            toggleButtonText.innerText = window.read_description.less;
                            content.classList.add('show-full');
                        }
                    });
                }
            }

            readDescriptionToggle();
        </script>
    {%- endif -%}
{%- endif -%}

{% schema %}
    {
        "name": "t:sections.main-header-collection.name",
        "settings":
        [
            {
                "type": "header",
                "content": "t:sections.main-header-collection.settings.header__1.content"
            },
            {
                "type": "checkbox",
                "id": "show_breadcrumb",
                "label": "t:sections.general.settings.breadcrumb.label__1",
                "default": true
            },
            {
                "type": "select",
                "id": "breadcrumb_alignment",
                "label": "t:sections.general.settings.breadcrumb.label__2",
                "options": [
                {
                    "value": "left",
                    "label": "t:sections.general.settings.breadcrumb.options__1"
                },
                {
                    "value": "center",
                    "label": "t:sections.general.settings.breadcrumb.options__2"
                },
                {
                    "value": "right",
                    "label": "t:sections.general.settings.breadcrumb.options__3"
                }],
                "default": "left"
            },
            {
                "type": "paragraph",
                "content": "t:settings_schema.colors.settings.colors_breadcrumb.label__4"
            },
            { 
                "type": "color",
                "id": "breadcrumb_color",
                "label": "t:settings_schema.colors.settings.colors_name.color"
            },
            { 
                "type": "color",
                "id": "breadcrumb_bg",
                "label": "t:settings_schema.colors.settings.colors_name.background_color"
            },
            {
                "type": "color_background",
                "id": "breadcrumb_gradient",
                "label": "t:settings_schema.colors.settings.colors_name.background_color_gradient"
            },
            { 
                "type": "color",
                "id": "breadcrumb_color_mb",
                "label": "t:settings_schema.colors.settings.colors_name.color_mobile"
            },
            { 
                "type": "color",
                "id": "breadcrumb_bg_mb",
                "label": "t:settings_schema.colors.settings.colors_name.background_color_mobile",
                "default": "#f6f6f6"
            },
            {
                "type": "color_background",
                "id": "breadcrumb_gradient_mb",
                "label": "t:settings_schema.colors.settings.colors_name.background_gradient_mobile"
            },
            {
                "type": "checkbox",
                "id": "show_page_title",
                "label": "t:sections.general.settings.page-title.label__1",
                "default": true
            },
            {
              "type": "select",
              "id": "page_title_alignment",
              "label": "t:sections.general.settings.page-title.label__2",
              "options": [
              {
                  "value": "left",
                  "label": "t:sections.general.settings.page-title.options__1"
              },
              {
                  "value": "center",
                  "label": "t:sections.general.settings.page-title.options__2"
              },
              {
                  "value": "right",
                  "label": "t:sections.general.settings.page-title.options__3"
              }],
              "default": "left"
            },
            {
                "type": "select",
                "id": "container",
                "label": "t:sections.layout.container.option",
                "default": "container",
                "options": [
                    {
                        "value": "container",
                        "label": "t:sections.layout.container.option1"
                    },
                    {
                        "value": "1170",
                        "label": "t:sections.layout.container.option4"
                    },
                    {
                        "value": "fullwidth",
                        "label": "t:sections.layout.container.option2"
                    },
                    {
                        "value": "1770",
                        "label": "t:sections.layout.container.option3"
                    }
                ]
            },
            {
                "type": "header",
                "content": "t:sections.layout.margin_top"
            },
            {
                "type": "range",
                "id": "mg_top_desktop",
                "label": "t:sections.layout.mg_desktop.label",
                "min": 0,
                "max": 100,
                "step": 5,
                "unit": "t:sections.layout.mg_desktop.unit",
                "default": 0
            },
            {
                "type": "range",
                "id": "mg_top_tablet",
                "label": "t:sections.layout.mg_tablet.label",
                "min": 0,
                "max": 100,
                "step": 5,
                "unit": "t:sections.layout.mg_desktop.unit",
                "default": 0
            },
            {
                "type": "range",
                "id": "mg_top_mobile",
                "label": "t:sections.layout.mg_mobile.label",
                "min": 0,
                "max": 100,
                "step": 5,
                "unit": "t:sections.layout.mg_desktop.unit",
                "default": 0
            },
            {
                "type": "header",
                "content": "t:sections.layout.margin_bottom"
            },
            {
                "type": "range",
                "id": "mg_bottom_desktop",
                "label": "t:sections.layout.mg_desktop.label",
                "min": 0,
                "max": 100,
                "step": 5,
                "unit": "t:sections.layout.mg_desktop.unit",
                "default": 0
            },
            {
                "type": "range",
                "id": "mg_bottom_tablet",
                "label": "t:sections.layout.mg_tablet.label",
                "min": 0,
                "max": 100,
                "step": 5,
                "unit": "t:sections.layout.mg_desktop.unit",
                "default": 0
            },
            {
                "type": "range",
                "id": "mg_bottom_mobile",
                "label": "t:sections.layout.mg_mobile.label",
                "min": 0,
                "max": 100,
                "step": 5,
                "unit": "t:sections.layout.mg_desktop.unit",
                "default": 0
            },
            {
                "type": "select",
                "id": "layout",
                "label": "t:sections.main-header-collection.settings.general.label__1",
                "options": [
                {
                    "value": "1",
                    "label": "t:settings_schema.typography.settings.typography.style_1"
                },
                {
                    "value": "2",
                    "label": "t:settings_schema.typography.settings.typography.style_2"
                },
                {
                    "value": "3",
                    "label": "t:settings_schema.typography.settings.typography.style_3"
                }],
                "default": "1"
            }
        ],
        "blocks":
        [
            {
                "type": "image",
                "name": "t:sections.main-header-collection.blocks.image.name",
                "limit": 1,
                "settings":
                [
                    {
                        "type": "paragraph",
                        "content": "t:sections.main-header-collection.blocks.image.settings.paragraph.content"
                    },
                    {
                        "type": "header",
                        "content": "t:sections.main-header-collection.blocks.image.settings.header__1.content"
                    },
                    {
                      "type" : "image_picker",
                      "id" : "default_collectio_image",
                      "label" : "Default Collectio Image"
                    }
                ]
            }
        ]
    }
{% endschema %}